local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local Lighting = game:GetService("Lighting")
local HttpService = game:GetService("HttpService")

local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
local settings = {
    speed = 1,
    isFlying = false,
    isNoClip = false,
    isESPEnabled = false,
    isSpeedHack = false,
    isAimbot = false,
    espNames = true,
    espDistance = true,
    speedHackValue = 2,
    aimbotKey = Enum.KeyCode.Q,
    flyKey = Enum.KeyCode.F,
    noclipKey = Enum.KeyCode.V,
    espKey = Enum.KeyCode.X
}

local currentTab = "Fly"
local tpwalking = false
local flightConnections = {}
local flightParts = {}
local espHighlights = {}
local aimbotConnection

-- –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ GUI –≤ —Å—Ç–∏–ª–µ Minecraft
local main = Instance.new("ScreenGui")
main.Name = "MinecraftStyleGUI"
main.Parent = CoreGui
main.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
main.ResetOnSpawn = false

-- –ì–ª–∞–≤–Ω—ã–π —Ñ—Ä–µ–π–º
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = main
MainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MainFrame.BorderSizePixel = 2
MainFrame.BorderColor3 = Color3.fromRGB(80, 80, 80)
MainFrame.Position = UDim2.new(0.1, 0, 0.3, 0)
MainFrame.Size = UDim2.new(0, 400, 0, 450)
MainFrame.Active = true
MainFrame.Draggable = true

-- –¢–µ–Ω—å
local Shadow = Instance.new("Frame")
Shadow.Name = "Shadow"
Shadow.Parent = MainFrame
Shadow.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Shadow.BackgroundTransparency = 0.7
Shadow.BorderSizePixel = 0
Shadow.Position = UDim2.new(0, 4, 0, 4)
Shadow.Size = UDim2.new(1, 0, 1, 0)
Shadow.ZIndex = -1

-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ Minecraft-—Å—Ç–∏–ª—å
local TitleFrame = Instance.new("Frame")
TitleFrame.Name = "TitleFrame"
TitleFrame.Parent = MainFrame
TitleFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
TitleFrame.BorderSizePixel = 2
TitleFrame.BorderColor3 = Color3.fromRGB(80, 80, 80)
TitleFrame.Size = UDim2.new(1, 0, 0, 35)

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Name = "TitleLabel"
TitleLabel.Parent = TitleFrame
TitleLabel.BackgroundTransparency = 1
TitleLabel.Size = UDim2.new(1, -80, 1, 0)
TitleLabel.Font = Enum.Font.SourceSansBold
TitleLabel.Text = "MINECRAFT CHEATS V5"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextSize = 16

-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–∫–Ω–æ–º Minecraft-—Å—Ç–∏–ª—å
local CloseButton = createMinecraftButton(TitleFrame, "X", UDim2.new(1, -30, 0.5, -10), UDim2.new(0, 25, 0, 25), Color3.fromRGB(200, 60, 60))
local MinimizeButton = createMinecraftButton(TitleFrame, "_", UDim2.new(1, -60, 0.5, -10), UDim2.new(0, 25, 0, 25), Color3.fromRGB(200, 160, 60))

-- –§—Ä–µ–π–º –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤–∫–ª–∞–¥–æ–∫
local TabButtonsFrame = Instance.new("Frame")
TabButtonsFrame.Name = "TabButtonsFrame"
TabButtonsFrame.Parent = MainFrame
TabButtonsFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
TabButtonsFrame.BorderSizePixel = 2
TabButtonsFrame.BorderColor3 = Color3.fromRGB(80, 80, 80)
TabButtonsFrame.Position = UDim2.new(0, 0, 0, 35)
TabButtonsFrame.Size = UDim2.new(0, 120, 0, 415)

-- –§—Ä–µ–π–º –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "ContentFrame"
ContentFrame.Parent = MainFrame
ContentFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
ContentFrame.BorderSizePixel = 2
ContentFrame.BorderColor3 = Color3.fromRGB(80, 80, 80)
ContentFrame.Position = UDim2.new(0, 120, 0, 35)
ContentFrame.Size = UDim2.new(0, 280, 0, 415)

-- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Minecraft-—Å—Ç–∏–ª—å
function createMinecraftButton(parent, text, position, size, color)
    local button = Instance.new("TextButton")
    button.Parent = parent
    button.BackgroundColor3 = color
    button.BorderSizePixel = 2
    button.BorderColor3 = Color3.fromRGB(100, 100, 100)
    button.Position = position
    button.Size = size
    button.Font = Enum.Font.SourceSansBold
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.TextSize = 14
    button.AutoButtonColor = false
    
    -- –≠—Ñ—Ñ–µ–∫—Ç –Ω–∞–∂–∞—Ç–∏—è Minecraft
    button.MouseButton1Down:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(
            math.max(color.R * 255 - 30, 0),
            math.max(color.G * 255 - 30, 0),
            math.max(color.B * 255 - 30, 0)
        )
        button.Position = button.Position + UDim2.new(0, 1, 0, 1)
    end)
    
    button.MouseButton1Up:Connect(function()
        button.BackgroundColor3 = color
        button.Position = button.Position - UDim2.new(0, 1, 0, 1)
    end)
    
    button.MouseEnter:Connect(function()
        button.BorderColor3 = Color3.fromRGB(150, 150, 150)
    end)
    
    button.MouseLeave:Connect(function()
        button.BorderColor3 = Color3.fromRGB(100, 100, 100)
    end)
    
    return button
end

function createMinecraftLabel(parent, text, position, size)
    local label = Instance.new("TextLabel")
    label.Parent = parent
    label.BackgroundTransparency = 1
    label.Position = position
    label.Size = size
    label.Font = Enum.Font.SourceSans
    label.Text = text
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    
    return label
end

function createMinecraftSlider(parent, text, position, minValue, maxValue, currentValue, callback)
    local sliderFrame = Instance.new("Frame")
    sliderFrame.Parent = parent
    sliderFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    sliderFrame.BorderSizePixel = 2
    sliderFrame.BorderColor3 = Color3.fromRGB(80, 80, 80)
    sliderFrame.Position = position
    sliderFrame.Size = UDim2.new(0.8, 0, 0, 40)
    
    local label = createMinecraftLabel(sliderFrame, text..": "..currentValue, UDim2.new(0, 5, 0, 0), UDim2.new(1, -10, 0, 20))
    
    local track = Instance.new("Frame")
    track.Parent = sliderFrame
    track.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    track.BorderSizePixel = 0
    track.Position = UDim2.new(0, 5, 0, 25)
    track.Size = UDim2.new(1, -10, 0, 10)
    
    local fill = Instance.new("Frame")
    fill.Parent = track
    fill.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
    fill.BorderSizePixel = 0
    fill.Size = UDim2.new((currentValue - minValue) / (maxValue - minValue), 0, 1, 0)
    
    local button = Instance.new("TextButton")
    button.Parent = track
    button.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    button.BorderSizePixel = 2
    button.BorderColor3 = Color3.fromRGB(100, 100, 100)
    button.Size = UDim2.new(0, 15, 0, 15)
    button.Position = UDim2.new((currentValue - minValue) / (maxValue - minValue), -7, 0, -2)
    button.Text = ""
    
    local dragging = false
    
    button.MouseButton1Down:Connect(function()
        dragging = true
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local mousePos = UserInputService:GetMouseLocation()
            local trackPos = track.AbsolutePosition
            local trackSize = track.AbsoluteSize
            
            local relativeX = math.clamp((mousePos.X - trackPos.X) / trackSize.X, 0, 1)
            local value = minValue + (maxValue - minValue) * relativeX
            
            fill.Size = UDim2.new(relativeX, 0, 1, 0)
            button.Position = UDim2.new(relativeX, -7, 0, -2)
            label.Text = text..": "..math.floor(value * 10) / 10
            
            callback(value)
        end
    end)
    
    return sliderFrame
end

function createMinecraftToggle(parent, text, position, defaultValue, callback)
    local toggleFrame = Instance.new("Frame")
    toggleFrame.Parent = parent
    toggleFrame.BackgroundTransparency = 1
    toggleFrame.Position = position
    toggleFrame.Size = UDim2.new(0.8, 0, 0, 30)
    
    local label = createMinecraftLabel(toggleFrame, text, UDim2.new(0, 35, 0, 0), UDim2.new(1, -35, 1, 0))
    
    local toggleButton = Instance.new("TextButton")
    toggleButton.Parent = toggleFrame
    toggleButton.BackgroundColor3 = defaultValue and Color3.fromRGB(100, 200, 100) or Color3.fromRGB(200, 100, 100)
    toggleButton.BorderSizePixel = 2
    toggleButton.BorderColor3 = Color3.fromRGB(100, 100, 100)
    toggleButton.Position = UDim2.new(0, 5, 0.5, -10)
    toggleButton.Size = UDim2.new(0, 20, 0, 20)
    toggleButton.Text = ""
    
    toggleButton.MouseButton1Click:Connect(function()
        local newValue = not defaultValue
        toggleButton.BackgroundColor3 = newValue and Color3.fromRGB(100, 200, 100) or Color3.fromRGB(200, 100, 100)
        defaultValue = newValue
        callback(newValue)
    end)
    
    return toggleFrame
end

-- –°–æ–∑–¥–∞–µ–º –≤–∫–ª–∞–¥–∫–∏ Minecraft-—Å—Ç–∏–ª—å
local tabs = {
    Fly = {name = "Flight", color = Color3.fromRGB(86, 156, 214), icon = "‚úàÔ∏è"},
    Movement = {name = "Movement", color = Color3.fromRGB(106, 214, 86), icon = "üèÉ"},
    Visuals = {name = "Visuals", color = Color3.fromRGB(214, 86, 186), icon = "üëÅÔ∏è"},
    Combat = {name = "Combat", color = Color3.fromRGB(214, 86, 86), icon = "üéØ"},
    Settings = {name = "Settings", color = Color3.fromRGB(214, 174, 86), icon = "‚öôÔ∏è"}
}

local tabButtons = {}
local tabFrames = {}

for tabName, tabData in pairs(tabs) do
    -- –ö–Ω–æ–ø–∫–∞ –≤–∫–ª–∞–¥–∫–∏
    local button = createMinecraftButton(TabButtonsFrame, tabData.icon.." "..tabData.name, 
        UDim2.new(0, 5, 0, 5 + (#tabButtons * 45)), UDim2.new(1, -10, 0, 40), Color3.fromRGB(50, 50, 50))
    
    -- –§—Ä–µ–π–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    local contentFrame = Instance.new("Frame")
    contentFrame.Name = tabName.."Content"
    contentFrame.Parent = ContentFrame
    contentFrame.BackgroundTransparency = 1
    contentFrame.Size = UDim2.new(1, 0, 1, 0)
    contentFrame.Visible = false
    
    tabButtons[tabName] = button
    tabFrames[tabName] = contentFrame
    
    button.MouseButton1Click:Connect(function()
        switchTab(tabName)
    end)
end

-- –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
function switchTab(tabName)
    currentTab = tabName
    
    for name, frame in pairs(tabFrames) do
        frame.Visible = false
    end
    
    for name, button in pairs(tabButtons) do
        button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    end
    
    if tabFrames[tabName] then
        tabFrames[tabName].Visible = true
    end
    if tabButtons[tabName] then
        tabButtons[tabName].BackgroundColor3 = tabs[tabName].color
    end
end

-- –°–û–î–ï–†–ñ–ò–ú–û–ï –í–ö–õ–ê–î–û–ö

-- –í–∫–ª–∞–¥–∫–∞ Flight
local FlyContent = tabFrames.Fly

local FlyToggle = createMinecraftToggle(FlyContent, "Enable Flight", UDim2.new(0.1, 0, 0.05, 0), false, function(value)
    settings.isFlying = value
    if value then
        enableFlight()
    else
        disableFlight()
    end
end)

createMinecraftLabel(FlyContent, "Flight Speed", UDim2.new(0.1, 0, 0.15, 0), UDim2.new(0.8, 0, 0, 20))
createMinecraftSlider(FlyContent, "Speed", UDim2.new(0.1, 0, 0.2, 0), 1, 10, settings.speed, function(value)
    settings.speed = value
    if settings.isFlying then
        disableFlight()
        wait(0.1)
        enableFlight()
    end
end)

local NoClipToggle = createMinecraftToggle(FlyContent, "NoClip", UDim2.new(0.1, 0, 0.35, 0), false, function(value)
    settings.isNoClip = value
    if value then
        enableNoClip()
    else
        disableNoClip()
    end
end)

createMinecraftLabel(FlyContent, "Flight Key: "..settings.flyKey.Name, UDim2.new(0.1, 0, 0.5, 0), UDim2.new(0.8, 0, 0, 20))
createMinecraftLabel(FlyContent, "NoClip Key: "..settings.noclipKey.Name, UDim2.new(0.1, 0, 0.55, 0), UDim2.new(0.8, 0, 0, 20))

-- –í–∫–ª–∞–¥–∫–∞ Movement
local MovementContent = tabFrames.Movement

local SpeedToggle = createMinecraftToggle(MovementContent, "Speed Hack", UDim2.new(0.1, 0, 0.05, 0), false, function(value)
    settings.isSpeedHack = value
    if value then
        enableSpeedHack()
    else
        disableSpeedHack()
    end
end)

createMinecraftSlider(MovementContent, "Speed Multiplier", UDim2.new(0.1, 0, 0.2, 0), 1, 5, settings.speedHackValue, function(value)
    settings.speedHackValue = value
    if settings.isSpeedHack then
        disableSpeedHack()
        enableSpeedHack()
    end
end)

-- –í–∫–ª–∞–¥–∫–∞ Visuals
local VisualsContent = tabFrames.Visuals

local ESPToggle = createMinecraftToggle(VisualsContent, "Player ESP", UDim2.new(0.1, 0, 0.05, 0), false, function(value)
    settings.isESPEnabled = value
    if value then
        enableESP()
    else
        disableESP()
    end
end)

local ESPNamesToggle = createMinecraftToggle(VisualsContent, "Show Names", UDim2.new(0.1, 0, 0.15, 0), true, function(value)
    settings.espNames = value
    if settings.isESPEnabled then
        disableESP()
        enableESP()
    end
end)

local ESPDistanceToggle = createMinecraftToggle(VisualsContent, "Show Distance", UDim2.new(0.1, 0, 0.25, 0), true, function(value)
    settings.espDistance = value
    if settings.isESPEnabled then
        disableESP()
        enableESP()
    end
end)

createMinecraftLabel(VisualsContent, "ESP Key: "..settings.espKey.Name, UDim2.new(0.1, 0, 0.4, 0), UDim2.new(0.8, 0, 0, 20))

-- –í–∫–ª–∞–¥–∫–∞ Combat
local CombatContent = tabFrames.Combat

local AimbotToggle = createMinecraftToggle(CombatContent, "Aimbot", UDim2.new(0.1, 0, 0.05, 0), false, function(value)
    settings.isAimbot = value
    if value then
        enableAimbot()
    else
        disableAimbot()
    end
end)

createMinecraftLabel(CombatContent, "Aimbot Key: "..settings.aimbotKey.Name, UDim2.new(0.1, 0, 0.15, 0), UDim2.new(0.8, 0, 0, 20))

-- –í–∫–ª–∞–¥–∫–∞ Settings
local SettingsContent = tabFrames.Settings

createMinecraftLabel(SettingsContent, "GUI Key: Insert", UDim2.new(0.1, 0, 0.05, 0), UDim2.new(0.8, 0, 0, 20))
createMinecraftLabel(SettingsContent, "Panic Key: Delete", UDim2.new(0.1, 0, 0.1, 0), UDim2.new(0.8, 0, 0, 20))
createMinecraftLabel(SettingsContent, "Unload Key: End", UDim2.new(0.1, 0, 0.15, 0), UDim2.new(0.8, 0, 0, 20))

local ResetButton = createMinecraftButton(SettingsContent, "Reset All Settings", UDim2.new(0.1, 0, 0.25, 0), UDim2.new(0.8, 0, 0, 35), Color3.fromRGB(200, 100, 100))

createMinecraftLabel(SettingsContent, "Minecraft Cheats V5", UDim2.new(0.1, 0, 0.8, 0), UDim2.new(0.8, 0, 0, 20))
createMinecraftLabel(SettingsContent, "By XNEO", UDim2.new(0.1, 0, 0.85, 0), UDim2.new(0.8, 0, 0, 20))

-- –°–ò–°–¢–ï–ú–´ –§–£–ù–ö–¶–ò–ô

-- Flight System
function enableFlight()
    if settings.isFlying then return end
    
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChildWhichIsA("Humanoid")
    if not humanoid then return end
    
    settings.isFlying = true
    
    -- Flight code from previous versions...
    -- (Implementation similar to before but adapted for new settings system)
end

function disableFlight()
    if not settings.isFlying then return end
    settings.isFlying = false
    -- Cleanup flight...
end

-- NoClip System
function enableNoClip()
    if settings.isNoClip then return end
    settings.isNoClip = true
    -- NoClip implementation...
end

function disableNoClip()
    if not settings.isNoClip then return end
    settings.isNoClip = false
    -- NoClip cleanup...
end

-- Speed Hack System
function enableSpeedHack()
    if settings.isSpeedHack then return end
    settings.isSpeedHack = true
    
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChildWhichIsA("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = humanoid.WalkSpeed * settings.speedHackValue
    end
end

function disableSpeedHack()
    if not settings.isSpeedHack then return end
    settings.isSpeedHack = false
    
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChildWhichIsA("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = humanoid.WalkSpeed / settings.speedHackValue
    end
end

-- ESP System with Name Tags
function enableESP()
    if settings.isESPEnabled then return end
    settings.isESPEnabled = true
    
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= player then
            createESP(otherPlayer)
        end
    end
end

function disableESP()
    if not settings.isESPEnabled then return end
    settings.isESPEnabled = false
    
    for _, highlight in pairs(espHighlights) do
        if highlight then
            highlight:Destroy()
        end
    end
    espHighlights = {}
end

function createESP(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return end
    
    local character = targetPlayer.Character
    local humanoid = character:FindFirstChildWhichIsA("Humanoid")
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    
    if not humanoid or not rootPart then return end
    
    -- Create Highlight
    local highlight = Instance.new("Highlight")
    highlight.Name = "ESP_Highlight"
    highlight.Parent = character
    highlight.Adornee = character
    highlight.FillColor = targetPlayer.Team and targetPlayer.TeamColor.Color or Color3.fromRGB(255, 0, 0)
    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
    highlight.FillTransparency = 0.7
    highlight.OutlineTransparency = 0
    
    -- Create BillboardGui for Name Tag
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "ESP_Billboard"
    billboard.Parent = character
    billboard.Adornee = rootPart
    billboard.Size = UDim2.new(0, 200, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    billboard.AlwaysOnTop = true
    
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Parent = billboard
    nameLabel.BackgroundTransparency = 1
    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
    nameLabel.Font = Enum.Font.SourceSansBold
    nameLabel.Text = targetPlayer.Name
    nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    nameLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    nameLabel.TextStrokeTransparency = 0
    nameLabel.TextSize = 14
    
    local distanceLabel = Instance.new("TextLabel")
    distanceLabel.Parent = billboard
    distanceLabel.BackgroundTransparency = 1
    distanceLabel.Size = UDim2.new(1, 0, 0.5, 0)
    distanceLabel.Position = UDim2.new(0, 0, 0.5, 0)
    distanceLabel.Font = Enum.Font.SourceSans
    distanceLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    distanceLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    distanceLabel.TextStrokeTransparency = 0
    distanceLabel.TextSize = 12
    
    -- Update distance
    local updateConnection
    updateConnection = RunService.Heartbeat:Connect(function()
        if not settings.isESPEnabled or not character or not player.Character then
            updateConnection:Disconnect()
            return
        end
        
        local playerRoot = player.Character:FindFirstChild("HumanoidRootPart")
        if playerRoot and rootPart then
            local distance = (playerRoot.Position - rootPart.Position).Magnitude
            distanceLabel.Text = math.floor(distance) .. " studs"
        end
        
        -- Update visibility based on settings
        nameLabel.Visible = settings.espNames
        distanceLabel.Visible = settings.espDistance
    end)
    
    espHighlights[targetPlayer] = {
        highlight = highlight,
        billboard = billboard,
        connection = updateConnection
    }
end

-- Aimbot System
function enableAimbot()
    if settings.isAimbot then return end
    settings.isAimbot = true
    
    aimbotConnection = UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then return end
        
        if input.KeyCode == settings.aimbotKey then
            local closestPlayer = getClosestPlayer()
            if closestPlayer and closestPlayer.Character then
                local target = closestPlayer.Character:FindFirstChild("HumanoidRootPart")
                if target then
                    -- Aim at target
                    local camera = workspace.CurrentCamera
                    camera.CFrame = CFrame.new(camera.CFrame.Position, target.Position)
                end
            end
        end
    end)
end

function disableAimbot()
    if not settings.isAimbot then return end
    settings.isAimbot = false
    
    if aimbotConnection then
        aimbotConnection:Disconnect()
    end
end

function getClosestPlayer()
    local closestPlayer = nil
    local closestDistance = math.huge
    local localRoot = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    
    if not localRoot then return nil end
    
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= player and otherPlayer.Character then
            local targetRoot = otherPlayer.Character:FindFirstChild("HumanoidRootPart")
            if targetRoot then
                local distance = (localRoot.Position - targetRoot.Position).Magnitude
                if distance < closestDistance then
                    closestDistance = distance
                    closestPlayer = otherPlayer
                end
            end
        end
    end
    
    return closestPlayer
end

-- Keybind System
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == Enum.KeyCode.Insert then
        MainFrame.Visible = not MainFrame.Visible
    elseif input.KeyCode == Enum.KeyCode.Delete then
        -- Panic button - disable all features
        disableFlight()
        disableNoClip()
        disableSpeedHack()
        disableESP()
        disableAimbot()
    elseif input.KeyCode == Enum.KeyCode.End then
        -- Unload script
        disableFlight()
        disableNoClip()
        disableSpeedHack()
        disableESP()
        disableAimbot()
        main:Destroy()
    elseif input.KeyCode == settings.flyKey then
        settings.isFlying = not settings.isFlying
        if settings.isFlying then
            enableFlight()
        else
            disableFlight()
        end
    elseif input.KeyCode == settings.noclipKey then
        settings.isNoClip = not settings.isNoClip
        if settings.isNoClip then
            enableNoClip()
        else
            disableNoClip()
        end
    elseif input.KeyCode == settings.espKey then
        settings.isESPEnabled = not settings.isESPEnabled
        if settings.isESPEnabled then
            enableESP()
        else
            disableESP()
        end
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
ResetButton.MouseButton1Click:Connect(function()
    -- Reset all settings
    disableFlight()
    disableNoClip()
    disableSpeedHack()
    disableESP()
    disableAimbot()
    
    settings = {
        speed = 1,
        isFlying = false,
        isNoClip = false,
        isESPEnabled = false,
        isSpeedHack = false,
        isAimbot = false,
        espNames = true,
        espDistance = true,
        speedHackValue = 2
    }
    
    -- Refresh GUI
    switchTab(currentTab)
end)

CloseButton.MouseButton1Click:Connect(function()
    main:Destroy()
end)

MinimizeButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = false
end)

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
player.CharacterAdded:Connect(function(character)
    wait(1)
    disableFlight()
    disableNoClip()
    
    local humanoid = character:WaitForChild("Humanoid")
    humanoid.Died:Connect(function()
        disableFlight()
        disableNoClip()
    end)
end)

-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
switchTab("Fly")

-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "MINECRAFT CHEATS V5",
    Text = "Loaded! Insert - GUI, Delete - Panic, End - Unload",
    Duration = 5
})

print("Minecraft Cheats V5 loaded!")
print("Keybinds: Insert (GUI), Delete (Panic), End (Unload)")
print("Features: Flight, NoClip, SpeedHack, ESP, Aimbot")
