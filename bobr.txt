-- Fixed Cheat Menu
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")

local player = Players.LocalPlayer

print("=== FIXED CHEAT MENU ===")

-- –°–æ–∑–¥–∞–µ–º –º–µ–Ω—é
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FixedCheatMenu"
screenGui.Parent = CoreGui

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Parent = screenGui
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Position = UDim2.new(0.1, 0, 0.2, 0)
mainFrame.Size = UDim2.new(0, 200, 0, 200)
mainFrame.Active = true
mainFrame.Draggable = true

local title = Instance.new("TextLabel")
title.Parent = mainFrame
title.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
title.BorderSizePixel = 0
title.Size = UDim2.new(1, 0, 0, 30)
title.Font = Enum.Font.SourceSansBold
title.Text = "FIXED CHEATS"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 14

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞
local speedEnabled = false
local jumpEnabled = false
local noclipEnabled = false
local flyEnabled = false

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫
local function createButton(text, position)
    local button = Instance.new("TextButton")
    button.Parent = mainFrame
    button.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    button.BorderSizePixel = 0
    button.Position = position
    button.Size = UDim2.new(0.9, 0, 0, 30)
    button.Font = Enum.Font.SourceSans
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.TextSize = 12
    
    return button
end

-- 1. SPEED HACK
local speedBtn = createButton("SPEED: OFF", UDim2.new(0.05, 0, 0.2, 0))
speedBtn.MouseButton1Click:Connect(function()
    speedEnabled = not speedEnabled
    local humanoid = player.Character and player.Character:FindFirstChild("Humanoid")
    
    if humanoid then
        if speedEnabled then
            humanoid.WalkSpeed = 50
            speedBtn.Text = "SPEED: ON"
            speedBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
            print("‚úÖ Speed ON - WalkSpeed: 50")
        else
            humanoid.WalkSpeed = 16
            speedBtn.Text = "SPEED: OFF"
            speedBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            print("‚ùå Speed OFF - WalkSpeed: 16")
        end
    else
        print("‚ö†Ô∏è No humanoid found for speed!")
    end
end)

-- 2. JUMP POWER
local jumpBtn = createButton("JUMP: OFF", UDim2.new(0.05, 0, 0.4, 0))
jumpBtn.MouseButton1Click:Connect(function()
    jumpEnabled = not jumpEnabled
    local humanoid = player.Character and player.Character:FindFirstChild("Humanoid")
    
    if humanoid then
        if jumpEnabled then
            humanoid.JumpPower = 100
            jumpBtn.Text = "JUMP: ON"
            jumpBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
            print("‚úÖ Jump ON - JumpPower: 100")
        else
            humanoid.JumpPower = 50
            jumpBtn.Text = "JUMP: OFF"
            jumpBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            print("‚ùå Jump OFF - JumpPower: 50")
        end
    else
        print("‚ö†Ô∏è No humanoid found for jump!")
    end
end)

-- 3. NOCLIP
local noclipBtn = createButton("NOCLIP: OFF", UDim2.new(0.05, 0, 0.6, 0))
noclipBtn.MouseButton1Click:Connect(function()
    noclipEnabled = not noclipEnabled
    
    if noclipEnabled then
        noclipBtn.Text = "NOCLIP: ON"
        noclipBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
        print("‚úÖ NoClip ON")
        
        -- –í–∫–ª—é—á–∏—Ç—å –Ω–æ–∫–ª–∏–ø
        spawn(function()
            while noclipEnabled do
                local character = player.Character
                if character then
                    for _, part in pairs(character:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = false
                        end
                    end
                end
                wait(0.1)
            end
        end)
    else
        noclipBtn.Text = "NOCLIP: OFF"
        noclipBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        print("‚ùå NoClip OFF")
        
        -- –í—ã–∫–ª—é—á–∏—Ç—å –Ω–æ–∫–ª–∏–ø
        local character = player.Character
        if character then
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end)

-- 4. FLY
local flyBtn = createButton("FLY: OFF", UDim2.new(0.05, 0, 0.8, 0))
local flyBodyVelocity

flyBtn.MouseButton1Click:Connect(function()
    flyEnabled = not flyEnabled
    
    if flyEnabled then
        flyBtn.Text = "FLY: ON"
        flyBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
        print("‚úÖ Fly ON")
        
        -- –í–∫–ª—é—á–∏—Ç—å –ø–æ–ª–µ—Ç
        local character = player.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            flyBodyVelocity = Instance.new("BodyVelocity")
            flyBodyVelocity.Velocity = Vector3.new(0, 0, 0)
            flyBodyVelocity.MaxForce = Vector3.new(40000, 40000, 40000)
            flyBodyVelocity.Parent = character.HumanoidRootPart
            
            -- –î–≤–∏–≥–∞–µ–º
            spawn(function()
                while flyEnabled and character do
                    local cam = workspace.CurrentCamera
                    local moveDir = Vector3.new(0, 0, 0)
                    
                    if UserInputService:IsKeyDown(Enum.KeyCode.W) then moveDir = moveDir + cam.CFrame.LookVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.S) then moveDir = moveDir - cam.CFrame.LookVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.A) then moveDir = moveDir - cam.CFrame.RightVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.D) then moveDir = moveDir + cam.CFrame.RightVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.Space) then moveDir = moveDir + Vector3.new(0, 1, 0) end
                    if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then moveDir = moveDir - Vector3.new(0, 1, 0) end
                    
                    if flyBodyVelocity then
                        flyBodyVelocity.Velocity = moveDir * 50
                    end
                    wait()
                end
            end)
        end
    else
        flyBtn.Text = "FLY: OFF"
        flyBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        print("‚ùå Fly OFF")
        
        -- –í—ã–∫–ª—é—á–∏—Ç—å –ø–æ–ª–µ—Ç
        if flyBodyVelocity then
            flyBodyVelocity:Destroy()
            flyBodyVelocity = nil
        end
    end
end)

-- –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == Enum.KeyCode.Insert then
        mainFrame.Visible = not mainFrame.Visible
        print("üìã Menu: " .. (mainFrame.Visible and "SHOWN" or "HIDDEN"))
    elseif input.KeyCode == Enum.KeyCode.Delete then
        screenGui:Destroy()
        print("üóëÔ∏è Menu destroyed")
    end
end)

print("‚úÖ Fixed Cheat Menu Loaded!")
print("üìù Insert - Show/Hide, Delete - Close")
print("üéÆ Buttons should change color and text now!")

-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "FIXED MENU LOADED",
    Text = "Buttons change color when ON/OFF",
    Duration = 5
})
